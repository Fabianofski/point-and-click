[gd_scene load_steps=19 format=3 uid="uid://bpt38qtfed741"]

[ext_resource type="MeshLibrary" uid="uid://cshlxqdyxkfl2" path="res://scenes/common/gridmap/gridmap.tres" id="1_dd0lh"]
[ext_resource type="Script" uid="uid://cfpgcq43n3efe" path="res://scenes/ui/inventory/inventory_display.gd" id="1_plydf"]
[ext_resource type="PackedScene" uid="uid://yfov34a37w28" path="res://entities/player/player.tscn" id="2_bfxgj"]
[ext_resource type="PackedScene" uid="uid://b1c7anxbg7hk4" path="res://common/shader/post_processing.tscn" id="3_dywbp"]
[ext_resource type="PackedScene" uid="uid://c885j2gv0cn6v" path="res://entities/interactable/interactable.tscn" id="4_8a7m2"]
[ext_resource type="Script" uid="uid://bk3032cvmxwr0" path="res://entities/interactable/on_click_action.gd" id="4_dywbp"]
[ext_resource type="Script" uid="uid://uvi6iap5o1j0" path="res://entities/camera/camera_3d_texel_snapped3.gd" id="5_1seuy"]
[ext_resource type="Script" uid="uid://crl2u3o0u8v37" path="res://entities/camera/camera_movement.gd" id="5_2r1tl"]
[ext_resource type="PackedScene" uid="uid://c20c27qyd0qt3" path="res://entities/camera/camera_target.tscn" id="8_8a7m2"]

[sub_resource type="NavigationMesh" id="NavigationMesh_gowux"]
vertices = PackedVector3Array(0.650001, 0.45, -1.25, 0.650001, 0.45, -3.75, -1.1, 0.45, -4, -3.6, 0.45, -4, -3.6, 0.45, -1.25, -7.6, 0.45, -0.5, -6.35, 0.45, -0.5, -6.1, 0.45, -4.25, -7.6, 0.45, -5.75, -1.1, 0.45, -5.75)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(6, 5, 7), PackedInt32Array(7, 5, 8), PackedInt32Array(2, 3, 9), PackedInt32Array(9, 3, 7), PackedInt32Array(9, 7, 8)]
geometry_parsed_geometry_type = 0
agent_radius = 0.2

[sub_resource type="Resource" id="Resource_lgguw"]
script = ExtResource("4_dywbp")
click_event = 4
object_id = "Capsule"
metadata/_custom_type_script = "uid://bk3032cvmxwr0"

[sub_resource type="Resource" id="Resource_nkeig"]
script = ExtResource("4_dywbp")
click_event = 2
item_id = "ball"
next_action = SubResource("Resource_lgguw")
metadata/_custom_type_script = "uid://bk3032cvmxwr0"

[sub_resource type="Resource" id="Resource_5ntmo"]
script = ExtResource("4_dywbp")
click_event = 0
timeline = "timeline"
next_action = SubResource("Resource_nkeig")
metadata/_custom_type_script = "uid://bk3032cvmxwr0"

[sub_resource type="Resource" id="Resource_plydf"]
script = ExtResource("4_dywbp")
click_event = 1
cam_pos = "side"
next_action = SubResource("Resource_5ntmo")
metadata/_custom_type_script = "uid://bk3032cvmxwr0"

[sub_resource type="SphereShape3D" id="SphereShape3D_8a7m2"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_8a7m2"]

[sub_resource type="Resource" id="Resource_nfihu"]
script = ExtResource("4_dywbp")
click_event = 1
cam_pos = "start"
metadata/_custom_type_script = "uid://bk3032cvmxwr0"

[sub_resource type="Environment" id="Environment_iqygu"]
background_mode = 1
background_color = Color(0.11, 0.085195, 0.0737, 1)
ambient_light_color = Color(0, 0, 0.682353, 1)
ambient_light_energy = 3.52

[node name="PixelatedScene" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 4

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
physics_object_picking = true
size = Vector2i(480, 270)
render_target_update_mode = 4

[node name="MarginContainer" type="MarginContainer" parent="SubViewportContainer/SubViewport"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = -230.0
offset_bottom = -129.0
grow_horizontal = 2
grow_vertical = 2

[node name="Node3D" type="Node3D" parent="SubViewportContainer/SubViewport/MarginContainer"]
script = ExtResource("1_plydf")

[node name="Label" type="Label" parent="SubViewportContainer/SubViewport/MarginContainer/Node3D"]
offset_top = 96.0
offset_right = 384.0
offset_bottom = 119.0

[node name="level" type="Node3D" parent="SubViewportContainer/SubViewport"]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(1.00136, 0, 0, 0, 1.00136, 0, 0, 0, 1.00136, 0.331736, 0, -1.35285)
navigation_mesh = SubResource("NavigationMesh_gowux")

[node name="GridMap" type="GridMap" parent="SubViewportContainer/SubViewport/level/NavigationRegion3D"]
mesh_library = ExtResource("1_dd0lh")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(0, 65534, 1, 2, 65535, 458754, 2, 65534, 458754, 65535, 65534, 1441793, 65534, 65534, 1441793, 65533, 65534, 1441793, 65534, 65533, 1441793, 65534, 65532, 1441793, 65533, 65533, 1441793, 65533, 65532, 1441793, 65532, 65532, 1441793, 65532, 65533, 1441793, 65532, 65534, 1441793, 65535, 65533, 1441793, 0, 65532, 1441793, 0, 65533, 1441793, 65535, 65532, 1441793, 1, 65534, 917504, 1, 65533, 917504, 1, 65532, 917504, 0, 65535, 1245184, 65535, 65535, 1245184, 65534, 65535, 1245184, 65533, 65535, 1245184, 65532, 65535, 1245184, 65531, 65534, 262144, 65531, 65533, 262144, 65531, 65532, 1179648, 65534, 65531, 1, 65533, 65531, 1, 65532, 65531, 1, 65533, 65530, 1, 65534, 65530, 1, 65532, 65530, 1, 65531, 65530, 1, 65531, 65531, 1, 65530, 65530, 1, 65530, 65531, 1, 65530, 65532, 1179648, 65530, 65533, 131072, 65530, 65534, 131072, 65530, 65535, 131072, 65529, 65535, 1, 65529, 65534, 1, 65529, 65533, 1, 65529, 65532, 1, 65529, 65531, 1, 65529, 65530, 1, 65528, 65530, 1, 65528, 65531, 1, 65528, 65532, 1, 65528, 65533, 1, 65528, 65534, 1, 65528, 65535, 1, 65529, 0, 1179648, 65528, 0, 1179648, 65527, 65535, 524288, 65527, 65534, 524288, 65527, 65533, 524288, 65527, 65532, 524288, 65527, 65531, 524288, 65527, 65530, 524288)
}

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(0.335771, 0.927821, -0.1625, 0.294739, 0.0603639, 0.953669, 0.894643, -0.368109, -0.253197, 0, 5, 0)
light_energy = 0.868
shadow_enabled = true

[node name="DirectionalLight3D2" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(-0.898198, 0.439589, 0.00148925, 0.198581, 0.402727, 0.893519, 0.392182, 0.802852, -0.449023, 4.6391, 5.30182, -1.84055)
light_energy = 0.436
shadow_enabled = true

[node name="Player" parent="SubViewportContainer/SubViewport/level" node_paths=PackedStringArray("target") groups=["snap"] instance=ExtResource("2_bfxgj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.01405, 0.0669539, -4.91875)
target = NodePath("../Marker3D")

[node name="Marker3D" type="Marker3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4496, 0.708897, -5.17944)

[node name="Interactable" parent="SubViewportContainer/SubViewport/level" instance=ExtResource("4_8a7m2")]
transform = Transform3D(-0.791904, 0, 0.610642, 0, 1, 0, -0.610642, 0, -0.791904, -3.08762, 1.03958, -2.76025)
object_id = "Capsule"
on_click_action = SubResource("Resource_plydf")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/level/Interactable"]
shape = SubResource("SphereShape3D_8a7m2")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/level/Interactable"]
mesh = SubResource("CapsuleMesh_8a7m2")

[node name="Interactable2" parent="SubViewportContainer/SubViewport/level" instance=ExtResource("4_8a7m2")]
transform = Transform3D(-0.791904, 0, 0.610642, 0, 1, 0, -0.610642, 0, -0.791904, -6.68461, 1.03958, -3.00837)
on_click_action = SubResource("Resource_nfihu")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/level/Interactable2"]
shape = SubResource("SphereShape3D_8a7m2")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/level/Interactable2"]
mesh = SubResource("CapsuleMesh_8a7m2")

[node name="CameraRig" type="Node3D" parent="SubViewportContainer/SubViewport" node_paths=PackedStringArray("camera_positions")]
transform = Transform3D(-1, 1.0677e-07, -1.0677e-07, 0, 0.707107, 0.707107, 1.50996e-07, 0.707107, -0.707107, -1.4, 4.5, -8)
script = ExtResource("5_2r1tl")
camera_positions = {
"side": NodePath("../CameraPositions/CameraTarget2"),
"start": NodePath("../CameraPositions/CameraTarget1")
}

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport/CameraRig"]
environment = SubResource("Environment_iqygu")
projection = 1
size = 6.0
far = 200.0
script = ExtResource("5_1seuy")

[node name="PostProcessing" parent="SubViewportContainer/SubViewport/CameraRig/Camera3D" instance=ExtResource("3_dywbp")]
transform = Transform3D(0.486448, 0, -0.486448, -0.243224, 0.595775, -0.243224, 0.421276, 0.34397, 0.421276, -0.133085, -1.80905, -4.74297)
extra_cull_margin = 16384.0
skeleton = NodePath("../../../..")

[node name="CameraPositions" type="Node3D" parent="SubViewportContainer/SubViewport"]

[node name="CameraTarget1" parent="SubViewportContainer/SubViewport/CameraPositions" instance=ExtResource("8_8a7m2")]
transform = Transform3D(-1, 1.0677e-07, -1.0677e-07, 0, 0.707107, 0.707107, 1.50996e-07, 0.707107, -0.707107, -1.4, 4.5, -8)

[node name="CameraTarget2" parent="SubViewportContainer/SubViewport/CameraPositions" instance=ExtResource("8_8a7m2")]
transform = Transform3D(-4.37114e-08, 0.707107, -0.707107, 0, 0.707107, 0.707107, 1, 3.09086e-08, -3.09086e-08, -7.5, 4.482, -4.984)
