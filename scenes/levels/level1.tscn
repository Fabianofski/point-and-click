[gd_scene load_steps=9 format=3 uid="uid://bpt38qtfed741"]

[ext_resource type="MeshLibrary" uid="uid://cshlxqdyxkfl2" path="res://scenes/common/gridmap/gridmap.tres" id="1_dd0lh"]
[ext_resource type="PackedScene" uid="uid://yfov34a37w28" path="res://entities/player/player.tscn" id="2_bfxgj"]
[ext_resource type="Script" uid="uid://bfu3f57i4bh3s" path="res://common/scripts/interactable.gd" id="3_bfxgj"]
[ext_resource type="PackedScene" uid="uid://b1c7anxbg7hk4" path="res://common/shader/post_processing.tscn" id="3_dywbp"]

[sub_resource type="NavigationMesh" id="NavigationMesh_gowux"]
vertices = PackedVector3Array(0.650001, 0.45, -1.25, 0.650001, 0.45, -3.75, -1.1, 0.45, -4, -3.6, 0.45, -4, -3.6, 0.45, -1.25, -7.6, 0.45, -0.5, -6.35, 0.45, -0.5, -6.1, 0.45, -4.25, -7.6, 0.45, -5.75, -1.1, 0.45, -5.75)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(6, 5, 7), PackedInt32Array(7, 5, 8), PackedInt32Array(2, 3, 9), PackedInt32Array(9, 3, 7), PackedInt32Array(9, 7, 8)]
geometry_parsed_geometry_type = 0
agent_radius = 0.2

[sub_resource type="BoxShape3D" id="BoxShape3D_bfxgj"]
size = Vector3(0.2, 0.2, 0.2)

[sub_resource type="SphereMesh" id="SphereMesh_dywbp"]
radius = 0.3
height = 0.6

[sub_resource type="Environment" id="Environment_iqygu"]
background_mode = 1
background_color = Color(0.11, 0.085195, 0.0737, 1)
ambient_light_color = Color(0, 0, 0.682353, 1)
ambient_light_energy = 3.52

[node name="PixelatedScene" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 4

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
physics_object_picking = true
size = Vector2i(288, 162)
render_target_update_mode = 4

[node name="level" type="Node3D" parent="SubViewportContainer/SubViewport"]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(1.00136, 0, 0, 0, 1.00136, 0, 0, 0, 1.00136, 0.331736, 0, -1.35285)
navigation_mesh = SubResource("NavigationMesh_gowux")

[node name="GridMap" type="GridMap" parent="SubViewportContainer/SubViewport/level/NavigationRegion3D"]
mesh_library = ExtResource("1_dd0lh")
cell_size = Vector3(1, 1, 1)
data = {
"cells": PackedInt32Array(0, 65534, 1, 2, 65535, 458754, 2, 65534, 458754, 65535, 65534, 1441793, 65534, 65534, 1441793, 65533, 65534, 1441793, 65534, 65533, 1441793, 65534, 65532, 1441793, 65533, 65533, 1441793, 65533, 65532, 1441793, 65532, 65532, 1441793, 65532, 65533, 1441793, 65532, 65534, 1441793, 65535, 65533, 1441793, 0, 65532, 1441793, 0, 65533, 1441793, 65535, 65532, 1441793, 1, 65534, 917504, 1, 65533, 917504, 1, 65532, 917504, 0, 65535, 1245184, 65535, 65535, 1245184, 65534, 65535, 1245184, 65533, 65535, 1245184, 65532, 65535, 1245184, 65531, 65534, 262144, 65531, 65533, 262144, 65531, 65532, 1179648, 65534, 65531, 1, 65533, 65531, 1, 65532, 65531, 1, 65533, 65530, 1, 65534, 65530, 1, 65532, 65530, 1, 65531, 65530, 1, 65531, 65531, 1, 65530, 65530, 1, 65530, 65531, 1, 65530, 65532, 1179648, 65530, 65533, 131072, 65530, 65534, 131072, 65530, 65535, 131072, 65529, 65535, 1, 65529, 65534, 1, 65529, 65533, 1, 65529, 65532, 1, 65529, 65531, 1, 65529, 65530, 1, 65528, 65530, 1, 65528, 65531, 1, 65528, 65532, 1, 65528, 65533, 1, 65528, 65534, 1, 65528, 65535, 1, 65529, 0, 1179648, 65528, 0, 1179648, 65527, 65535, 524288, 65527, 65534, 524288, 65527, 65533, 524288, 65527, 65532, 524288, 65527, 65531, 524288, 65527, 65530, 524288)
}

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(0.335771, 0.927821, -0.1625, 0.294739, 0.0603639, 0.953669, 0.894643, -0.368109, -0.253197, 0, 5, 0)
light_energy = 0.868
shadow_enabled = true

[node name="DirectionalLight3D2" type="DirectionalLight3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(-0.898198, 0.439589, 0.00148925, 0.198581, 0.402727, 0.893519, 0.392182, 0.802852, -0.449023, 4.6391, 5.30182, -1.84055)
light_energy = 0.436
shadow_enabled = true

[node name="Player" parent="SubViewportContainer/SubViewport/level" node_paths=PackedStringArray("target") instance=ExtResource("2_bfxgj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.01405, 0.0669539, -4.91875)
target = NodePath("../Marker3D")

[node name="Marker3D" type="Marker3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.4496, 0.708897, -5.17944)

[node name="Area3D" type="Area3D" parent="SubViewportContainer/SubViewport/level"]
transform = Transform3D(0.813192, 0, 0.581995, 0, 1, 0, -0.581995, 0, 0.813192, -3.27557, 0.344338, -2.91054)
script = ExtResource("3_bfxgj")

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/level/Area3D"]
shape = SubResource("BoxShape3D_bfxgj")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/level/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.110591, 0)
mesh = SubResource("SphereMesh_dywbp")
skeleton = NodePath("../..")

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(-1, 6.18172e-08, -6.18172e-08, 0, 0.707107, 0.707107, 8.74228e-08, 0.707107, -0.707107, -1.34864, 4.48237, -7.98359)
environment = SubResource("Environment_iqygu")
projection = 1
size = 6.045
far = 200.0

[node name="PostProcessing" parent="SubViewportContainer/SubViewport/Camera3D" instance=ExtResource("3_dywbp")]
transform = Transform3D(0.486448, 0, -0.486448, -0.243224, 0.595775, -0.243224, 0.421276, 0.34397, 0.421276, -0.133085, -1.80905, -4.74297)
extra_cull_margin = 16384.0

[connection signal="mouse_entered" from="SubViewportContainer/SubViewport/level/Area3D" to="SubViewportContainer/SubViewport/level/Area3D" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="SubViewportContainer/SubViewport/level/Area3D" to="SubViewportContainer/SubViewport/level/Area3D" method="_on_mouse_exited"]
